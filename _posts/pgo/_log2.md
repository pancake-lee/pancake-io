# 业务代码中的日志打印

## 如何创建日志模块

函数式组件 VS 传统 Setter 方法

## 如何提供日志接口

全局单例 VS 上下文传递 VS 依赖注入

## 日志聚合平台

## 依赖注入的重构路径

| 阶段   | 策略               | 测试方法                    |
| ------ | ------------------ | --------------------------- |
| MVP 期 | 直接实现，快速验证 | 手动测试，测试环境验证      |
| 成长期 | 识别痛点，逐步抽象 | 集成测试 + 关键路径单元测试 |
| 稳定期 | 完善架构，全面测试 | 完整的测试金字塔            |

### 稳定期

首先我们明确依赖注入带来的好处，更换存储，更换测试 mock 数据等等，
整个项目各部分都变成了可插拔的代码块，他们都更专注于自己的功能实现。

### MVP 期

更重要的问题是：
（有很大一部分项目）在项目前期，需求不是那么明确，或者初步预测的体量较小，
所以并不希望从项目之初就构建很复杂的依赖注入的代码。

想想项目之初只是先构建起用户信息基本接口，
dao 读写数据库，到业务代码调用之间还需要“定义接口，需要依赖注入的构造，参数传递”等等一系列体操。
怎么想都不如全局单例，业务代码直接调用 dao 单例访问数据库。

### 成长期

那么怎么“逐步过渡”到更加成熟的架构，这个过程才是重点：
